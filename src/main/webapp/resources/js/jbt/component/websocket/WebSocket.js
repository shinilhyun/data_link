!function(){var n=[{ObjNm:"SockJS",ScrptNm:"sockjs-0.3.4.js"}];for(var e,o,t=function(n){for(var e="",o=document.getElementsByTagName("script"),t=0,l=o.length;t<l;t++){var r=o[t];if(-1!=r.src.indexOf(n)){var i=r.src;e=i.substr(0,i.lastIndexOf(n))}}return e}("WebSocket.js"),l=0,r=n.length;l<r;l++){var i=n[l];void 0===window[i.ObjNm]&&(e=t+"lib/"+i.ScrptNm,o=void 0,(o=document.createElement("script")).type="text/javascript",o.src=e,document.head.appendChild(o),console.log("Init Script : "+e))}}();var JBWebSocket=function(n){void 0===n&&(n={});var e=void 0===n.url?"/websocket":n.url,o=void 0===n.userId?null:n.userId,t={},l="_PATH",r=null,i=5,c=0,s=null;function a(n,e){var o={};if(o[l]=n,"object"==typeof e){var t=JSON.stringify(e);o._DATA=t}else o._DATA=e;s.send(JSON.stringify(o))}function u(n){t[n]&&delete t[n]}return function n(){c++>=i?null!=r&&(clearInterval(r),r=null,console.log("서버에 접속되지 않습니다. 담당자에게 연락 바랍니다.")):((s=new SockJS(e,null,{protocols_whitelist:["websocket","xdr-streaming","xhr-streaming","iframe-eventsource","iframe-htmlfile","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"]})).onopen=function(n){var e;e=n,console.log(e),void 0!==o&&null!=o&&a("INIT",o),null!=r&&(clearInterval(r),r=null,c=0)},s.onclose=function(e){console.log("WebSocket Close"),null==r&&(r=setInterval(function(){n()},5e3))},s.onmessage=function(n){!function(n){var e=JSON.parse(n.data),o=e._KEY,l=e._DATA;t[o]&&t[o].call(this,l)}(n)},s.onerror=function(n){var e;e=n,console.log(e)})}(),{sendMessage:function(n,e){a(n,e)},setListener:function(n,e){var o,l;l=e,u(o=n),t[o]=l},removeListener:function(n){u(n)}}};